<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A MÃ¡quina de SÃ­labas</title>
    <style>
        :root {
            --machine-color: #454545;
            --neon-blue: #00d4ff;
            --accent: #ff007a;
        }

        body {
            margin: 0; padding: 0; font-family: 'Comic Sans MS', sans-serif;
            background: #121212; color: white; overflow: hidden; touch-action: none;
        }

        /* MÃ¡quina Principal */
        .game-world {
            display: flex; flex-direction: column; align-items: center; justify-content: space-between;
            height: 100vh; padding: 20px;
        }

        .machine-container {
            position: relative; width: 320px; height: 200px;
            background: var(--machine-color); border-radius: 20px;
            border: 8px solid #333; display: flex; align-items: center;
            justify-content: center; box-shadow: 0 0 30px rgba(0,212,255,0.3);
        }

        .consonant-fixed {
            font-size: 6rem; font-weight: 900; color: var(--neon-blue);
            margin-right: 10px; text-shadow: 0 0 15px var(--neon-blue);
        }

        .vowel-drop-zone {
            width: 100px; height: 130px; border: 4px dashed rgba(255,255,255,0.3);
            border-radius: 15px; display: flex; align-items: center; justify-content: center;
            font-size: 6rem; font-weight: 900; color: var(--accent);
        }

        /* Carrossel de Vogais */
        .vowel-carousel {
            display: flex; gap: 20px; padding: 20px;
            overflow-x: auto; width: 100%; justify-content: center;
            background: rgba(255,255,255,0.05); border-radius: 50px 50px 0 0;
        }

        .vowel-card {
            min-width: 80px; height: 80px; background: var(--accent);
            border-radius: 20px; display: flex; align-items: center;
            justify-content: center; font-size: 3rem; font-weight: bold;
            box-shadow: 0 6px #9d004b; cursor: pointer;
        }

        /* Feedback Visual */
        #result-display {
            position: fixed; top: 20%; left: 50%; transform: translate(-50%, -50%) scale(0);
            text-align: center; transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 100;
        }

        #result-display.show { transform: translate(-50%, -50%) scale(1.5); }

        .result-image { font-size: 8rem; display: block; }
        .result-text { font-size: 3rem; font-weight: bold; text-transform: uppercase; color: yellow; }

        .instruction { opacity: 0.7; font-size: 1rem; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="game-world">
    <div id="result-display">
        <span class="result-image" id="res-img">ðŸ¥¿</span>
        <span class="result-text" id="res-txt">PÃ‰</span>
    </div>

    <div class="instruction">Arrasta uma vogal para o quadro!</div>

    <div class="machine-container" id="machine">
        <div class="consonant-fixed">P</div>
        <div class="vowel-drop-zone" id="target">?</div>
    </div>

    <div class="vowel-carousel" id="carousel">
        <div class="vowel-card" data-vowel="A">A</div>
        <div class="vowel-card" data-vowel="E">E</div>
        <div class="vowel-card" data-vowel="I">I</div>
        <div class="vowel-card" data-vowel="O">O</div>
        <div class="vowel-card" data-vowel="U">U</div>
    </div>
</div>

<script>
    const data = {
        'A': { word: 'PÃ', img: 'ðŸ§¹', sound: 'PÃ¡!' },
        'E': { word: 'PÃ‰', img: 'ðŸ¦¶', sound: 'PÃ©!' },
        'I': { word: 'PI', img: 'ðŸ¥', sound: 'Piu-Piu!' },
        'O': { word: 'PÃ“', img: 'â˜ï¸', sound: 'PÃ³!' },
        'U': { word: 'PU', img: 'ðŸ’¨', sound: 'Pum!' }
    };

    let draggedEl = null;

    // ConfiguraÃ§Ã£o de Voz (PT-PT)
    function speak(text) {
        const msg = new SpeechSynthesisUtterance();
        msg.text = text;
        msg.lang = 'pt-PT'; // Garante o sotaque de Portugal
        msg.rate = 0.8;      // Um pouco mais lento para ser didÃ¡tico
        window.speechSynthesis.speak(msg);
    }

    document.querySelectorAll('.vowel-card').forEach(card => {
        card.addEventListener('touchstart', (e) => {
            const touch = e.touches[0];
            draggedEl = card.cloneNode(true);
            draggedEl.style.position = 'fixed';
            draggedEl.style.zIndex = '1000';
            draggedEl.style.left = touch.clientX - 40 + 'px';
            draggedEl.style.top = touch.clientY - 40 + 'px';
            document.body.appendChild(draggedEl);
            
            // Falar a letra ao tocar
            speak(card.dataset.vowel);
        });
    });

    window.addEventListener('touchmove', (e) => {
        if (!draggedEl) return;
        const touch = e.touches[0];
        draggedEl.style.left = touch.clientX - 40 + 'px';
        draggedEl.style.top = touch.clientY - 40 + 'px';
    }, { passive: false });

    window.addEventListener('touchend', (e) => {
        if (!draggedEl) return;
        const touch = e.changedTouches[0];
        const target = document.getElementById('target').getBoundingClientRect();

        if (touch.clientX > target.left && touch.clientX < target.right &&
            touch.clientY > target.top && touch.clientY < target.bottom) {
            
            const v = draggedEl.dataset.vowel;
            processSyllable(v);
        }
        
        draggedEl.remove();
        draggedEl = null;
    });

    function processSyllable(v) {
        const targetZone = document.getElementById('target');
        const resDiv = document.getElementById('result-display');
        
        targetZone.innerText = v;
        targetZone.style.color = 'white';
        
        // Atualiza feedback
        document.getElementById('res-img').innerText = data[v].img;
        document.getElementById('res-txt').innerText = data[v].word;
        
        // AnimaÃ§Ã£o e Som
        resDiv.classList.add('show');
        speak(data[v].word);

        setTimeout(() => {
            resDiv.classList.remove('show');
            targetZone.innerText = '?';
            targetZone.style.color = 'var(--accent)';
        }, 2500);
    }
</script>

</body>
</html>
